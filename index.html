<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Convert HTML to Markdown</title>
    <script src="https://unpkg.com/turndown/dist/turndown.js"></script>

</head>

<body>

<!--// HTML convert to Markdown text

//  Form input HTML text to convert to Markdown text
-->
<script type="text/javascript">

function convertHtmlToMarkdown(inputHtml ) {
    // Create an instance of the Turndown service
    var  turndownService = new TurndownService();

    var markdown = turndownService.turndown(inputHtml);

    // set markdown text 
    document.getElementById('outputMarkdown').value = markdown;

//return markdown;

}

function readselectedfileToHtmlArea() {
    var file = document.getElementById('file').files[0];

    if ( file == null ) {
        //alert("No file selected.");
        return;
    }

    var reader = new FileReader();
    reader.onload = function (e) {
        var contents = e.target.result;
        document.getElementById('inputHtml').value = contents;
    };
    reader.readAsText(file);
}



</script>


<h1>Convert HTML to Markdown</h1>
<div id="markdown">

    <p>Enter HTML text here</p>
    <table>
    <tr>
    
<td>   <textarea id="inputHtml" rows="50" cols="50" placeholder="Enter HTML text here"></textarea>
</td> 
<td>
    <button onclick="convertHtmlToMarkdown(document.getElementById('inputHtml').value)">Convert</button>

</td>
<td>
    <textarea id="outputMarkdown" rows="50" cols="50" placeholder="Markdown text will appear here"></textarea>
</td>
</tr>
    
<tr>
    <td>
    <!-- add button clear inputHtml area  -->
    <button onclick="document.getElementById('inputHtml').value = ''">Clear</button>

    <!-- add button  upload loacal html file to inputHtml area  -->
    <input type="file" id="file" name="file" onchange="readselectedfileToHtmlArea()" />
</td>

<td></td>
<td>
    <!-- add button clear outputMarkdown area -->
    <button onclick="document.getElementById('outputMarkdown').value = ''">Clear</button>

    <!-- add button download outputMarkdown text to local file -->
    <a id="downloadlink" download="outputMarkdown.txt" href="" onclick="document.getElementById('downloadlink').href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(document.getElementById('outputMarkdown').value)">Download</a>
</td>
</tr>
</table>
</div>

</body>
</html>
